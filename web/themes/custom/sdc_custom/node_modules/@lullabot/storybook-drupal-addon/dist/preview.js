'use strict';

var previewApi = require('@storybook/preview-api');

var m=(()=>{let e;return typeof window<"u"?e=window:typeof globalThis<"u"?e=globalThis:typeof global<"u"?e=global:typeof self<"u"?e=self:e={},e})();var{window:f}=m,b="\u{1F493}",g=(e,c)=>{let[i,t]=previewApi.useGlobals(),p=i?.drupalTheme,o=i?.supportedDrupalThemes;previewApi.useEffect(()=>{let{parameters:{drupalTheme:r,supportedDrupalThemes:a}}=c;a&&t(r&&!r?{drupalTheme:r,supportedDrupalThemes:a}:{supportedDrupalThemes:a});},[p,o]);let l=i?.hash;return previewApi.useEffect(()=>{let r=f?.__whmEventSourceWrapper?.["/__webpack_hmr"];if(!r)return;r.addMessageListener(a);function a(s){if(s.data==b)return;let n;try{n=JSON.parse(s.data);}catch(u){console.warn("Invalid HMR message: "+s.data+`
`+u);return}let d=n?.hash;d&&(l===d?f.document.location.reload():t({hash:d}));}},[l]),e()};function S(e){let c=e.getElementById("___cl-wrapper"),i=e.getElementsByTagName("script"),t=e.createElement("body");e.body.getAttributeNames().forEach(o=>{t.setAttribute(o,e.body.getAttribute(o));}),t.innerHTML=c.innerHTML;let p=e.createElement("div");return p.append(...Array.from(i)),t.append(p),t}var _=async(e,c,i,t)=>{e=e.replace(/\/$/,"");let p=t.parameters?.options?.variant,o=new URL(`${e}/_cl_server`),l={_storyFileName:t.parameters.fileName,_drupalTheme:t.globals.drupalTheme||t.parameters.drupalTheme};p&&(l._variant=p),o.search=new URLSearchParams(l).toString(),o.username="",o.password="";let r=await fetch(o.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),a=await r.text();if(r.status>=399){let s=`${r.status} (${r.statusText})`,n="";r.headers.forEach((u,w)=>{n+=`${w}: ${u}
`;});let d=r.url;throw new Error(`There was an error while making the request to Drupal. Locate the request in the Network tab of your browser's developer tools for more information.
Requested URL: ${d}
Response code: ${s}
Response Headers:
${n}
Response body: ${a}.`)}try{let n=new DOMParser().parseFromString(a,"text/html");return n.body=S(n),n.children[0].outerHTML}catch(s){throw console.error(s),s}},y=_;var M=[g],N={server:{fetchStoryHtml:y}};

exports.decorators = M;
exports.parameters = N;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=preview.js.map